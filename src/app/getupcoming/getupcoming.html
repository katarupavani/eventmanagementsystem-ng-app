<app-navbar></app-navbar>

<div class="container mt-5 position-relative" #timelineContainer>
  <h2 class="text-center mb-5 display-4 text-gradient fw-bold">
    <i class="bi bi-stars"></i> Upcoming Events Timeline
  </h2>

  <div *ngIf="errorMessage" class="alert alert-danger text-center fw-semibold">
    {{ errorMessage }}
  </div>

  <!-- Responsive SVG Curve -->
<!-- Enhanced SVG Curve -->
<svg #timelineSVG class="timeline-svg" viewBox="0 0 1200 600" preserveAspectRatio="xMidYMid meet">
  <defs>
    <linearGradient id="curveGradient" x1="0%" y1="0%" x2="100%" y2="100%">
      <stop offset="0%" stop-color="#0dcaf0" />
      <stop offset="100%" stop-color="#6f42c1" />
    </linearGradient>
  </defs>

  <path 
    id="timelinePathElement"
    d="M 100 500 C 400 100, 800 900, 1100 300" 
    fill="none" stroke="url(#curveGradient)" stroke-width="6" />
</svg>


  <!-- Dots on Curve -->
  <div 
    *ngFor="let pos of dotPositions; let i = index" 
    class="dot" 
    [ngStyle]="{ top: pos.y + 'px', left: pos.x + 'px' }"
    (mouseenter)="showPopup(i)" 
    (mouseleave)="hidePopup()">
  </div>

  <!-- Popup Event Card -->
  <div *ngIf="hoveredEventIndex !== null" 
       class="popup-card glass-card shadow-lg"
       [ngStyle]="popupPosition">
    <div class="p-4">
      <h4 class="text-gradient fw-bold mb-3 text-center">{{ upcomingEvents[hoveredEventIndex].eventName }}</h4>
      <p><i class="bi bi-calendar-event me-2"></i>{{ upcomingEvents[hoveredEventIndex].date }}</p>
      <p><i class="bi bi-geo-alt me-2"></i>{{ upcomingEvents[hoveredEventIndex].location }}</p>
      <p><i class="bi bi-clock me-2"></i>{{ upcomingEvents[hoveredEventIndex].startTime }} - {{ upcomingEvents[hoveredEventIndex].endTime }}</p>
      <p><i class="bi bi-info-circle me-2"></i>{{ upcomingEvents[hoveredEventIndex].description }}</p>
    </div>
  </div>

  <p *ngIf="upcomingEvents.length === 0 && !errorMessage" class="text-center text-muted mt-5 fs-5">
    ðŸš« No upcoming events available.
  </p>
</div>
