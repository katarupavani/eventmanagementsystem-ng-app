<app-navbar></app-navbar>

<div class="container mt-4">
  <h3 class="text-center mb-4">Events</h3>

  <!-- Success/Error Messages -->
  <div *ngIf="successMessage" class="alert alert-success text-center">{{ successMessage }}</div>
  <div *ngIf="errorMessage" class="alert alert-danger text-center">{{ errorMessage }}</div>

  <!-- Events List -->
  <div *ngIf="!selectedEventId">
    <table class="table table-bordered">
      <thead>
        <tr class="table-primary">
          <th>Event ID</th>
          <th>Event Name</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let event of events">
          <td>{{ event.eventId }}</td>
          <td>{{ event.eventName }}</td>
          <td>
            <button class="btn btn-sm btn-primary" (click)="viewBookings(event.eventId, event.eventName)">
              View Bookings
            </button>
          </td>
        </tr>
      </tbody>
    </table>
  </div>

  <!-- Bookings for Selected Event -->
  <div *ngIf="selectedEventId">
    <h4 class="mb-3 text-primary">Bookings for "{{ selectedEventName }}" (Event ID: {{ selectedEventId }})</h4>
    <button class="btn btn-secondary mb-3" (click)="backToEvents()">‚Üê Back to Events</button>

    <table class="table table-striped">
      <thead>
        <tr class="table-success">
          <th>Booking ID</th>
          <th>UserId</th>
          <th>Booking Date</th>
          <th>Actions</th>
        </tr>
      </thead>
      <tbody>
       <tr *ngFor="let booking of bookings">
        <td>{{ booking.bookId }}</td>
        <td>{{ booking.userId }}</td>
        <td>{{ booking.eventdt }}</td>
        <td class="text-center">
              <button class="btn btn-outline-info btn-sm me-1" (click)="viewBooking(booking)">
                <i class="bi bi-eye"></i>
              </button>
              <button class="btn btn-outline-primary btn-sm me-1" (click)="editBooking(booking)">
                <i class="bi bi-pencil"></i>
              </button>
              <!-- <button class="btn btn-outline-danger btn-sm" (click)="openDeleteModal(booking)">
                <i class="bi bi-trash"></i>
              </button> -->
            </td>
        </tr>
      </tbody>
    </table>

    <div *ngIf="bookings.length === 0" class="alert alert-info">
      No bookings found for this event.
    </div>
  </div>
</div>
